version: "3.9"

services:
  api:
    build:
        context: .
        dockerfile: "SearchAPI/Dockerfile"
    image: 
    volumes:
        - C:\\DLS:/data
    deploy:
      replicas: 2
    depends_on:
      - balancer
  web:
    build:
        context: .
        dockerfile: "WebSearch/Dockerfile"
    ports:
        - "9002-9010:80"
    deploy:
      replicas: 1
  balancer:
    build:
      context: .
      dockerfile: "LoadBalancer/Dockerfile"
    ports:
      - "9011:80"
    deploy:
      replicas: 1
  
  featurehub:
    image: featurehub/party-server:latest
    restart: always
    volumes:
      - featurehub-h2-data:/db
    ports:
      - 8085:8085

  volumes:
    featurehub-h2-data: